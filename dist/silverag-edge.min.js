/*
 * Build Date: Sunday, November 9th, 2014, 10:26:25 PM
 *
 * Silver Ag v0.5.0
 * https://github.com/markwise/silverag
 *
 * Copyright (c) 2014 Mark Wise, contributers
 * Released under the terms of the MIT license
 */

var silverag=function(){"use strict";var a="0.5.0",b=window,c=document,d=(c.documentElement,c.head,function(){var a,b,c=function(c){return a=b=null,c},d=function(a){return a=a.trim(),a.length?a.split(/\s+/):[]},e=function(c){var e,f=d(i());void 0!==c?(e=f.indexOf(c),e>-1&&f.splice(e,1),h(f.join(" "))):b.removeAttribute(a)},f=function(a){var b=d(i());void 0!==a&&(g(a)||b.push(a)),h(b.join(" "))},g=function(c){return b.hasAttribute(a)?void 0!==c?d(i()).indexOf(c)>-1:!0:!1},h=function(c){b.setAttribute(a,c||"")},i=function(){return(b.getAttribute(a)||"").trim()},j={get:function(){return c(i())},set:function(a){c(h(a))},has:function(a){return c(g(a))},add:function(a){c(f(a))},remove:function(a){c(e(a))}};return function(c,d){return a=c,b=d,j}}()),e=function(){var a=0;return function(b){return b.agid=(new Date).getTime()+(a+=1)}}(),f=function(){var a={},b=function(b){return a[b]={}},c=function(b){a[b]=null},d=function(b){return a[b]};return{create:b,remove:c,get:d}}(),g=function(a){return c.querySelectorAll(a||"[ag]")},h=function(){var a=function(a){var b=d("ag-respond",a).get(),c="screen and (max-width:"+b+"px)";matchMedia(c).matches?i(a):h(a)},b=function(a){for(var b=a.firstElementChild,c=[];b;)d("ag-item",b).has("show")||c.push(b),d("class",b).add("ag-item"),b=b.nextElementSibling;return c},g=function(a){for(var e,f=b(a),g=f.length,h=1;g>h;h++)e=c.createElement("div"),d("ag-line",e).set(h),d("class",e).add("ag-line"),a.insertBefore(e,f[h])},h=function(a){var b=f.get(a.agid);d("class",a).remove("ag-responding"),d("class",a).add("ag-not-responding"),d("ag",a).set(b.modifiers)},i=function(a){d("class",a).remove("ag-not-responding"),d("class",a).add("ag-responding"),d("ag",a).remove()},j=function(b){if(void 0===b.agid){var c=f.create(e(b));c.modifiers=d("ag",b).get(),g(b),a(b),d("class",b).add("ag")}};return{initialize:j,removeModifiers:i,applyModifiers:h}}(),i=function(){var a=function(a,b){b||(b=g());for(var c=b.length;c--;)a(b[c])},b=function(b){a(h.initialize,b)},c=function(b){a(h.removeModifiers,b)},d=function(b){a(h.applyModifiers,b)};return{initialize:b,removeModifiers:c,applyModifiers:d}}(),j=function(){var a=function(a){d("class",a).has("ag")&&f.remove(a.agid);for(var b=a.querySelectorAll(".ag"),c=b.length;c--;)f.remove(b[c].agid)},e=function(b){for(var c,d,e=b.length;e--;)for(c=b[e].removedNodes,d=c.length;d--;)a(c[d]);i.initialize(g("[ag]:not(.ag)"))},k=function(b){var c=b.type,e=b.target;"DOMNodeInserted"===c?d("ag",e).has()&&h.initialize(e):"DOMNodeRemoved"===c&&a(e)},l=function(){var a=b.MutationObserver||b.WebKitMutationObserver;a?new a(e).observe(c.body,{childList:!0,subtree:!0}):b.MutationEvent&&(c.body.addEventListener("DOMNodeInserted",k),c.body.addEventListener("DOMNodeRemoved",k)),j=l=null};return{create:l}}(),k=function(){var a=function(a){var b=a.media.match(/(\d+)/)[1],c=g('[ag-respond="'+b+'"]');c.length&&(a.matches?i.removeModifiers(c):i.applyModifiers(c))},b=function(){var c,d;for(d=480;960>=d;d+=20)c="screen and (max-width:"+d+"px)",matchMedia(c).addListener(a);k=b=null};return{create:b}}();return function(){var a,b=function(){a=setTimeout(function(){i.initialize(),b()})};b();var d=function(){clearTimeout(a),i.initialize(),k.create(),j.create(),c.removeEventListener("DOMContentLoaded",d),a=b=null};c.addEventListener("DOMContentLoaded",d)}(),{version:a}}();